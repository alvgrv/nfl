{
    "resource": {
        "aws_lambda_layer_version": {
            "managed-layer": {
                "layer_name": "nfl-dev-managed-layer",
                "compatible_runtimes": [
                    "python3.9"
                ],
                "filename": "${path.module}/layer-deployment.zip",
                "source_code_hash": "${filebase64sha256(\"${path.module}/layer-deployment.zip\")}"
            }
        },
        "aws_iam_role": {
            "ticker_role": {
                "name": "nfl-dev-ticker",
                "assume_role_policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"\", \"Effect\": \"Allow\", \"Principal\": {\"Service\": \"lambda.amazonaws.com\"}, \"Action\": \"sts:AssumeRole\"}]}"
            }
        },
        "aws_iam_role_policy": {
            "ticker_role": {
                "name": "ticker_rolePolicy",
                "policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Effect\": \"Allow\", \"Action\": \"logs:CreateLogGroup\", \"Resource\": \"arn:aws:logs:eu-west-1:094758758809:*\"}, {\"Effect\": \"Allow\", \"Action\": [\"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Resource\": [\"arn:aws:logs:eu-west-1:094758758809:log-group:/aws/lambda/nfl-dev-ticker:*\"]}, {\"Effect\": \"Allow\", \"Action\": [\"dynamodb:BatchGet*\", \"dynamodb:DescribeStream\", \"dynamodb:DescribeTable\", \"dynamodb:Get*\", \"dynamodb:Query\", \"dynamodb:Scan\", \"dynamodb:BatchWrite*\", \"dynamodb:CreateTable\", \"dynamodb:Delete*\", \"dynamodb:Update*\", \"dynamodb:PutItem\"], \"Resource\": [\"arn:aws:dynamodb:eu-west-1:094758758809:table/nfl-schedule\", \"arn:aws:dynamodb:eu-west-1:094758758809:table/nfl-data\"]}]}",
                "role": "${aws_iam_role.ticker_role.id}"
            }
        },
        "aws_lambda_function": {
            "ticker": {
                "function_name": "nfl-dev-ticker",
                "runtime": "python3.9",
                "handler": "app.ticker",
                "memory_size": 128,
                "tags": {
                    "aws-chalice": "version=1.27.3:stage=dev:app=nfl"
                },
                "timeout": 900,
                "source_code_hash": "${filebase64sha256(\"${path.module}/deployment.zip\")}",
                "filename": "${path.module}/deployment.zip",
                "environment": {
                    "variables": {
                        "LOG_LEVEL": "INFO",
                        "SCHEDULE_TABLE": "nfl-schedule",
                        "DATA_TABLE": "nfl-data",
                        "SCRAPE_TARGET": "https://www.pro-football-reference.com"
                    }
                },
                "layers": [
                    "${aws_lambda_layer_version.managed-layer.arn}"
                ],
                "role": "${aws_iam_role.ticker_role.arn}"
            }
        }
    },
    "locals": {},
    "data": {
        "aws_caller_identity": {
            "chalice": {}
        },
        "aws_partition": {
            "chalice": {}
        },
        "aws_region": {
            "chalice": {}
        },
        "null_data_source": {
            "chalice": {
                "inputs": {
                    "app": "nfl",
                    "stage": "dev"
                }
            }
        }
    }
}